#設定
###概要

Sailsは「設定より規約」の哲学に忠実に則っているため、便利なデフォルト設定をその時時のカスタムの設定に変更する方法を学ぶことが重要です。
Sailのほとんどの規約に対してそれを個別のニーズに合わせて上書きしたり調整する事のできる設定が提供されています。ドキュメントのこのセッションではSailで利用可能な設定の完全なリファレンスが掲載されています。
Sailアプリはコマンドラインの引数や環境変数によって、またグローバルや個別の.sailsrcファイルを編集することによって、さらに（これが最もよく使われますが）規約上ではconfig/フォルダーに置かれているboilerplateの設定ファイルを書き換えることでプログラム的に設定することが出来ます。アプリケーションの中で利用される各種の設定を統合したauthoratativeは実行時にsails.configとしてグローバルに利用することが出来ます。


###通常の設定ファイル (config/*)

デフォルトで多くの設定ファイルがSailアプリに含まれています。これらのboilerplateファイルは多くのインラインコメントを含んでいます。これにより迅速にその場で設定の意味を確認できるようにしてドキュメントとエディタの間を行ったり来たりしなくてもいいようになっています。
多くのケースではsails.configオブジェクトのトップレベルのキー(例えば sails.config.views)は
設定ファイルの名称 (例えばconfig/views.js)に対応しています。しかしながら設定ファイルは開発者によってconfig/内で横断的に改変されることがあります。重要な部分は設定の名前 (すなわち key) でありファイル名ではありません。
例えばあなたたがconfig/foo.jsという新しいファイルを作成したとします。

```
// config/foo.js
// 以下のオブジェクトは `sails.config.blueprints`にマージされます。:
module.exports.blueprints = {
  shortcuts: false
};
```

ここの設定に関しての完全な設定プションやそれぞれが通常記録されているファイルに関してはこのセクションの各参照ページをご覧ください。まあ、より硬度な概要に関してはThe Anatomy of a Sails Appの"config/"のセクションに記述されています。

###アプリケーション内でsails.configにアクセスする

設定オブジェクトはSailsアプリのインスタンス(sails)によって利用可能です。デフォルトではこの設定オブジェクトは起動時にグローバルにアクセス可能にされるためアプリケーションのどこからでもアクセス可能です。


####例

```
// この例はプロダクションモードに居るかを確認してCSRFを有効化します。
//プロダクションモードでない場合はエラーを出力して停止します。
if (sails.config.environment === 'production' && !sails.config.csrf) {
  throw new Error('STOP IMMEDIATELY ! CSRF should always be enabled in a production deployment!');
}
```

###カスタムの設定

Sailsは異なるトップレベルキーによって名前空間を分けられた多くの設定を（例えばsails.config.sockets とsails.config.blueprintsのように）認識可能です。しかしながらsails.configを（例えばsails.config.someProprietaryAPI.secretのように）あなたのカスタムの設定のために利用することも可能です。

####例

```
// config/linkedin.js
module.exports.linkedin = {
  apiKey: '...',
  apiSecret: '...'
};
// In your controller/service/model/hook/whatever:
// ...
var apiKey = sails.config.linkedin.apiKey;
var apiSecret = sails.config.linkedin.apiSecret;
// ...
````

###Sailsのコマンドライン・インタフェースを設定する

設定に関しては多くのケースでポートやデータベース接続などの利用先固有の実行時設定の管理を強いられます。
しかしSailsのCLIをカスタマイズすることで繰り返し行う作業を減らしたりワークフローを簡単にしたりその他のオリジナルの自動化ツールを作成したりすることが出来ます。Sails v0.10からこれを実現する機能がサポートされました。
.sailsrcその他のコンフィグレーションファイルと異なりSailsのCLIをシステムワイドでもグループディレクトリ単位でも特定のディレクトリにcdした時限定で使い分けることが出来ます。これを行うことの第一の目的はSailsがインストールされたばかりの状態のジェネレータとあなたがカスタマイズしたり設定をハードコピーして上書きしたジェネレータを併用するためです。

そしてSailsは現在の作業ディレクトリの最寄りの.sailsrcファイルを参照するためデータベースパスワードのようなクラウドベースのレポジトリに保管することの難しいセンシティブな情報を安全に扱うことが出来ます。これを行うには.sailsrcファイルをあなたの"$HOME"ディレクトリにインクルードするだけで構いません。さらなる詳細は.sailsrcのドキュメンテーションを御覧ください。


###Notes
sails.configにあるいくつかの規定の設定はSailsの起動時にのみ読み込まれます。
言い換えれば実行中にいくつかのオプションを変えたとしてもそれは有効にならないことが有ります。例えば実行中にアプリケーションのポート設定を変更したい場合にはsails.config.portを書き換えたりオーバーライドしたり、コマンドラインのオプションを変えたりするだけでなくSailsを再起動する必要があります。


##.sailsrcファイルを使う
バージョン0.10からは、アプリケーションを設定するその他の方法がそれぞれのアプリケーションのみを設定できるということに加えて.sailsrcでは一つのファイルに複数のアプリケーションの設定を書くことが出来るようになりました。これによりあなたのコンピュータの中で動作しているすべてのSailsアプリケーションの設定を1つのファイルで行うことが出来るようになり、SailsのCLIを設定する上で最も便利な方法になりました。(素晴らしいrcモジュールによりこれを実現させてくれたTarrに感謝します。)

SailsのCLIが事項された時は現在の作業ディレクトリまたはホームディレクトリ(例えば　~/.sailsrc) からから最も近い.salsrcファイル(JSONかiniかフォーマットを問わず)を探しに行き。それから既存の設定とのマージを行います。
実際のところrcの慣習に則ってSailsはその他の場所へも.sailsrcを探しに行きます。あなたは.sailsrcをそれらのパスのどの場所にも置くことが出来ます。しかしながらあなたのグローバルな.sailsrcファイルを置くのに最も適した場所はホームディレクトリ(例えば　~/.sailsrc) ですのでその慣習にしたがって構わない時にはそうしてください。
